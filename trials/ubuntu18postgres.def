BootStrap: debootstrap
OSVersion: bionic
MirrorURL: http://us.archive.ubuntu.com/ubuntu/

%runscript
    echo "This is what happens when you run the container..."


%post
    # apt-get -y install sudo
    apt-get -y install software-properties-common
    echo "Hello from inside the container"
    sed -i 's/$/ universe/' /etc/apt/sources.list
    add-apt-repository ppa:mc3man/bionic-media
    apt-get update
    apt-get -y install vim python3 supervisor ffmpeg libldap2-dev \
        libsasl2-dev \
        python3-dev \o
        python3-pip \
        tzdata \
        p7zip-full \
        git \
        ssh \
        poppler-utils \
        curl \
	postgresql postgresql-contrib
    # apt-get clean

%appinstall postgres
# this is postgres 10, do I need the client libraries?


# %appinstall redis



# %appinstall cvatdjango




%startscript
service postgresql start

#export PGUSER="cleemess"
#export PGSSLMODE="require"
#export PGSSLCERT="/home/cleemess/database-creds/cleemess.crt"
#export PGSSLKEY="/home/cleemess/database-creds/cleemess-nopwd.key"
#export PGHOST="postgres-gen.cleemess-pi.svc.cluster.local"

e# xport PGPORT=5432
# example not used by default
# export PGDATABASE="postgres" 
